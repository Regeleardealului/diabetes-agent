<!DOCTYPE html>
<html>
<head>
    <title>Medical Chatbot</title>
    <link rel="icon" type="image/png" href="/static/virus.png">
    <link
        rel="stylesheet"
        href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous"
    />
    <link
        rel="stylesheet"
        href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
        integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU"
        crossorigin="anonymous"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script> 
    <link rel="stylesheet" type="text/css" href="/static/style.css">
    <script type="text/javascript" src="/static/function.js"></script> 
</head>

<body>
    <div class="container-fluid h-100">
        <div class="row justify-content-center h-100">
            <div class="col-md-9 col-xl-7 chat">
                <div class="card">
                    <div class="card-header msg_head">
                        <div class="d-flex bd-highlight">
                            <div class="img_cont">
                                <img
                                    src="/static/chatbot_profile.jpg"
                                    class="rounded-circle user_img"
                                    onerror="this.src='https://via.placeholder.com/70/4A54E2/FFFFFF?Text=Bot'"
                                />
                                <span class="online_icon"></span>
                            </div>
                            <div class="user_info">
                                <span>MediBot</span>
                                <p>Medical Knowledge Assistant</p>
                            </div>
                        </div>
                    </div>
                    <div id="messageFormeight" class="card-body msg_card_body">
                        <div class="d-flex justify-content-start mb-4">
                            <div class="img_cont_msg">
                                <img
                                    src="/static/chatbot_profile.jpg"
                                    class="rounded-circle user_img_msg"
                                    onerror="this.src='https://via.placeholder.com/40/4A54E2/FFFFFF?Text=B'"
                                />
                            </div>
                            <div class="msg_cotainer">
                                Hello! I'm an AI agent, your medical knowledge assistant. How can I help you today?
                                <span class="msg_time">Now</span>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <form id="messageArea" class="input-group">
                            <input
                                type="text"
                                id="text"
                                name="msg"
                                placeholder="Type your message..."
                                autocomplete="off"
                                class="form-control type_msg"
                                required
                            />
                            <div class="input-group-append">
                                <button
                                    type="submit"
                                    id="send"
                                    class="input-group-text send_btn"
                                >
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <style>
    /* Injected CSS for typing indicator */
    .typing-dots {
        display: flex;
        align-items: center;
        gap: 4px;
    }
    
    .typing-dots span {
        height: 8px;
        width: 8px;
        background-color: rgba(255, 255, 255, 0.7);
        border-radius: 50%;
        display: inline-block;
        animation: typing 1.4s infinite ease-in-out;
    }
    
    .typing-dots span:nth-child(1) { animation-delay: -0.32s; }
    .typing-dots span:nth-child(2) { animation-delay: -0.16s; }
    
    @keyframes typing {
        0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
        40% { transform: scale(1); opacity: 1; }
    }

    .msg_cotainer ul, .msg_cotainer ol {
        padding-left: 20px; 
        margin-bottom: 5px;
    }
    .msg_cotainer li {
        margin-bottom: 2px;
    }

    .sources-info {
        font-size: 0.7em; 
        color: white; 
        margin-top: 8px; 
        margin-bottom: 0px; 
        display: block; 
        word-break: break-word; 
    }
    .sources-info code {
        font-size: 0.9em; 
        background-color: rgba(255, 255, 255, 0.1); 
        border-radius: 3px;
        padding: 2px 4px;
        color: white; 
    }
    </style>
</body>
</html>